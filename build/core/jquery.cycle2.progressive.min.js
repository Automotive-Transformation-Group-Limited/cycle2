/* Plugin for Cycle2; Copyright (c) 2012-2016 M. Alsup, , D. Dziaduch; v2.1.15 */

!function(a){"use strict";a.extend(a.fn.cycle.defaults,{progressive:!1}),a(document).on("cycle-pre-initialize",function(e,r){if(r.progressive){var c,i=r.API,n=i.next,l=i.prev,t=i.prepareTx,s=a.type(r.progressive);if("array"==s)c=r.progressive;else if(a.isFunction(r.progressive))c=r.progressive(r);else if("string"==s){if(s=a(r.progressive),!(c=a.trim(s.html())))return;if(/^(\[)/.test(c))try{c=a.parseJSON(c)}catch(e){return void i.log("error parsing progressive slides",e)}else(c=c.split(new RegExp(s.data("cycle-split")||"\n")))[c.length-1]||c.pop()}t&&(i.prepareTx=function(e,i){var n;e||0===c.length?t.apply(r.API,[e,i]):i&&r.currSlide==r.slideCount-1?(n=c[0],c=c.slice(1),r.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.API.advanceSlide(1)},50)}),r.API.add(n)):i||0!==r.currSlide?t.apply(r.API,[e,i]):(i=c.length-1,n=c[i],c=c.slice(0,i),r.container.one("cycle-slide-added",function(e,i){setTimeout(function(){i.currSlide=1,i.API.advanceSlide(-1)},50)}),r.API.add(n,!0))}),n&&(i.next=function(){var e,i=this.opts();c.length&&i.currSlide==i.slideCount-1?(e=c[0],c=c.slice(1),i.container.one("cycle-slide-added",function(e,i){n.apply(i.API),i.container.removeClass("cycle-loading")}),i.container.addClass("cycle-loading"),i.API.add(e)):n.apply(i.API)}),l&&(i.prev=function(){var e,i,n=this.opts();c.length&&0===n.currSlide?(e=c.length-1,i=c[e],c=c.slice(0,e),n.container.one("cycle-slide-added",function(e,i){i.currSlide=1,i.API.advanceSlide(-1),i.container.removeClass("cycle-loading")}),n.container.addClass("cycle-loading"),n.API.add(i,!0)):l.apply(n.API)})}})}(jQuery);