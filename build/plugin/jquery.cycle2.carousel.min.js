/* Plugin for Cycle2; Copyright (c) 2012-2016 M. Alsup, , D. Dziaduch; v2.1.15 */

!function(u){"use strict";u(document).on("cycle-bootstrap",function(e,i,t){"carousel"===i.fx&&(t.getSlideIndex=function(e){var i=this.opts()._carouselWrap.children();return i.index(e)%i.length},t.next=function(){var e=i.reverse?-1:1;!1===i.allowWrap&&i.currSlide+e>i.slideCount-i.carouselVisible||(i.API.advanceSlide(e),i.API.trigger("cycle-next",[i]).log("cycle-next"))})}),u.fn.cycle.transitions.carousel={preInit:function(e){e.hideNonActive=!1,e.container.on("cycle-destroyed",u.proxy(this.onDestroy,e.API)),e.API.stopTransition=this.stopTransition;for(var i=0;i<e.startingSlide;i++)e.container.append(e.slides[0])},postInit:function(e){var i=e.carouselVertical;e.carouselVisible&&e.carouselVisible>e.slideCount&&(e.carouselVisible=e.slideCount-1);var t,l=e.carouselVisible||e.slides.length,s={display:i?"block":"inline-block",position:"static"};e.container.css({position:"relative",overflow:"hidden"}),e.slides.css(s),e._currSlide=e.currSlide,s=u('<div class="cycle-carousel-wrap"></div>').css({margin:0,padding:0,top:0,left:0,position:"absolute"}),e._carouselWrap=s,i||s.css("white-space","nowrap"),!1!==e.allowWrap?(t="",(i=e).slides.each(function(e,i){t+=i.outerHTML}),void 0===i.carouselVisible?i._carouselWrap.append(t,t,i.slides,t,t):i._carouselWrap.append(t,i.slides,t),s.find(".cycle-slide-active").removeClass("cycle-slide-active"),e.slides.eq(e.startingSlide).addClass("cycle-slide-active")):s.append(e.slides),e.container.prepend(s),e.pager&&!1===e.allowWrap&&(l=e.slideCount-l,u(e.pager).children().filter(":gt("+l+")").hide()),e._nextBoundry=e.slideCount-e.carouselVisible,this.prepareDimensions(e)},prepareDimensions:function(e){var i,t,l,s,r=e.carouselVertical,o=e.carouselVisible||e.slides.length;if(e.carouselFluid&&e.carouselVisible?e._carouselResizeThrottle||this.fluidSlides(e):e.carouselVisible&&e.carouselSlideDimension?(i=o*e.carouselSlideDimension,e.container[r?"height":"width"](i)):e.carouselVisible&&(i=o*u(e.slides[0])[r?"outerHeight":"outerWidth"](!0),e.container[r?"height":"width"](i)),t=e.carouselOffset||0,!1!==e.allowWrap)if(e.carouselSlideDimension)t-=(e.slideCount+e.currSlide)*e.carouselSlideDimension;else for(l=e._carouselWrap.children(),s=0;s<e.slideCount+e.currSlide;s++)t-=this[r?"getSlideHeight":"getSlideWidth"](l[s]);e._carouselWrap.css(r?"top":"left",t)},fluidSlides:function(i){var e,t=i.slides.eq(0),l=t.outerWidth()-t.width(),s=this.prepareDimensions;function r(){clearTimeout(e),e=setTimeout(o,20)}function o(){i._carouselWrap.stop(!1,!0);var e=i.container.width()/i.carouselVisible,e=Math.ceil(e-l);i._carouselWrap.children().width(e),i._sentinel&&i._sentinel.width(e),s(i)}u(window).on("resize",r),i._carouselResizeThrottle=r,o()},transition:function(e,i,t,l,s){var r,o,n={},c=e.nextSlide-e.currSlide,a=e.carouselVertical,d=e.speed;!1===e.allowWrap?(r=e._currSlide,o=e.slideCount-e.carouselVisible,(l=0<c)&&e.nextSlide>o&&r==o?c=0:0<c&&e.nextSlide>o?c=e.nextSlide-r-(e.nextSlide-o):c<0&&e.currSlide>o&&e.nextSlide>o?c=0:c<0&&e.currSlide>o?c+=e.currSlide-o:r=e.currSlide,r=this.getScroll(e,a,r,c),e.API.opts()._currSlide=e.nextSlide>o?o:e.nextSlide):(!l||0!==e.nextSlide)&&(l||e.nextSlide!=e.slideCount-1)?r=this.getScroll(e,a,e.currSlide,c):(r=this.getDim(e,e.currSlide,a),s=this.genCallback(e,l,a,s)),n[a?"top":"left"]=l?"-="+r:"+="+r,e.throttleSpeed&&(d=r/u(e.slides[0])[a?"height":"width"]()*e.speed),e._carouselWrap.animate(n,d,e.easing,s)},getDim:function(e,i,t){return u(e.slides[i])[t?"outerHeight":"outerWidth"](!0)},getScroll:function(e,i,t,l){var s,r=0;if(0<l)for(s=t;s<t+l;s++)r+=this.getDim(e,s,i);else for(s=t;t+l<s;s--)r+=this.getDim(e,s,i);return r},genCallback:function(i,e,t,l){return function(){var e=0-u(i.slides[i.nextSlide]).position()[t?"top":"left"]+(i.carouselOffset||0);i._carouselWrap.css(i.carouselVertical?"top":"left",e),l()}},stopTransition:function(){var e=this.opts();e.slides.stop(!1,!0),e._carouselWrap.stop(!1,!0)},onDestroy:function(e){var i=this.opts();i._carouselResizeThrottle&&u(window).off("resize",i._carouselResizeThrottle),i.slides.prependTo(i.container),i._carouselWrap.remove()},getSlideWidth:function(e){try{return e.getBoundingClientRect().width}catch(e){return 0}},getSlideHeight:function(e){try{return e.getBoundingClientRect().height}catch(e){return 0}}}}(jQuery);